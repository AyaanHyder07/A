24. Many-to-Many Mapping Between Student and Book Using Spring Boot JPA. 
App.js 
package com.infy; 
 
import java.util.Arrays; 
import java.util.List; 
import org.springframework.beans.factory.annotation.Autowired; 
import org.springframework.boot.CommandLineRunner; 
import org.springframework.boot.SpringApplication; 
import org.springframework.boot.autoconfigure.SpringBootApplication; 
import com.infy.Entity.Book; 
import com.infy.Entity.Student; 
import com.infy.repo.StudentRepo; 
 
@SpringBootApplication 
public class App implements CommandLineRunner { 
 
    @Autowired 
    private StudentRepo sr; 
 
    public static void main(String[] args) { 
        SpringApplication.run(App.class, args); 
    } 
 
    @Override 
    public void run(String... args) throws Exception { 
        Book b1 = new Book(1, "learningWithPython", "Python Basics"); 
        Book b2 = new Book(2, "java", "Java Fundamentals"); 
        Book b3 = new Book(3, "ds", "Data Structures"); 
 
        Student s1 = new Student(101, "John", Arrays.asList(b1, b2)); 
        Student s2 = new Student(102, "Ram", Arrays.asList(b2, b3)); 
        Student s3 = new Student(103, "Sanvi", Arrays.asList(b1)); 
        Student s4 = new Student(104, "Laxmi", Arrays.asList(b1, b2, b3)); 
 
        sr.saveAll(Arrays.asList(s1, s2, s3, s4)); 
 
        List<Student> sList = sr.findAll(); 
        for (Student s : sList) { 
            System.out.println(s); 
        } 
    } 
} 
 
68 
 
 
Book.js 
package com.infy.Entity; 
 
import java.util.List; 
import jakarta.persistence.Entity; 
import jakarta.persistence.Id; 
import jakarta.persistence.ManyToMany; 
 
@Entity 
public class Book { 
    @Id 
    private Integer bookId; 
    private String title; 
    private String bookName; 
 
  @ManyToMany(mappedBy = "books") 
    private List<Student> students; 
    public Book() {} 
 
    public Book(Integer bookId, String title, String bookName) { 
        this.bookId = bookId; 
        this.title = title; 
        this.bookName = bookName; 
    } 
 
    public Integer getBookId() { 
        return bookId; 
    } 
    public void setBookId(Integer bookId) { 
        this.bookId = bookId; 
    } 
 
    public String getTitle() { 
        return title; 
    } 
    public void setTitle(String title) { 
        this.title = title; 
    } 
 
    public String getBookName() { 
        return bookName; 
    } 
    public void setBookName(String bookName) { 
        this.bookName = bookName; 
69 
 
    } 
 
    public List<Student> getStudents() { 
        return students; 
    } 
    public void setStudents(List<Student> students) { 
        this.students = students; 
    } 
    @Override 
    public String toString() { 
        return "Book [bookId=" + bookId + ", title=" + title + ", bookName=" + bookName + "]"; 
    } 
} 
 
Student.js 
package com.infy.Entity; 
 
import java.util.List; 
import jakarta.persistence.CascadeType; 
import jakarta.persistence.Entity; 
import jakarta.persistence.Id; 
import jakarta.persistence.JoinTable; 
import jakarta.persistence.JoinColumn; 
import jakarta.persistence.ManyToMany; 
 
@Entity 
public class Student { 
    @Id 
    private Integer studentId; 
    private String studentName; 
 
    @ManyToMany(cascade = CascadeType.ALL) 
    @JoinTable( 
        name = "student_book", 
        joinColumns = @JoinColumn(name = "student_id"), 
        inverseJoinColumns = @JoinColumn(name = "book_id") 
    ) 
    private List<Book> books; 
 
    public Student() {} 
 
    public Student(Integer studentId, String studentName, List<Book> books) { 
        this.studentId = studentId; 
        this.studentName = studentName; 
        this.books = books; 
70 
 
    } 
 
    public Integer getStudentId() { 
        return studentId; 
    } 
    public void setStudentId(Integer studentId) { 
        this.studentId = studentId; 
    } 
 
    public String getStudentName() { 
        return studentName; 
    } 
    public void setStudentName(String studentName) { 
        this.studentName = studentName; 
    } 
 
    public List<Book> getBooks() { 
        return books; 
    } 
    public void setBooks(List<Book> books) { 
        this.books = books; 
    } 
 
    @Override 
    public String toString() { 
        return "Student [studentId=" + studentId + ", studentName=" + studentName + ", books=" + 
books + "]"; 
    } 
} 
 
 
BookRepo.js 
package com.infy.repo; 
import org.springframework.data.jpa.repository.JpaRepository; 
import org.springframework.stereotype.Repository; 
import com.infy.Entity.Book; 
 
@Repository 
public interface BookRepo extends  JpaRepository<Book,Integer>{ 
} 
 
 
StudentRepo.js 
package com.infy.repo; 
import org.springframework.data.jpa.repository.JpaRepository; 
import org.springframework.stereotype.Repository; 
import com.infy.Entity.Student; 
@Repository 
public interface StudentRepo extends JpaRepository<Student,Integer>{ 
} 
Application.properties 
spring.application.name=ManyToMany 
spring.datasource.url=jdbc:mysql://localhost:3306/stdBook 
spring.datasource.username=root 
spring.jpa.hibernate.ddl-auto=update 
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver 
spring.jpa.show-sql: true 
➔ Run The Application: 
o Open xampp , start Apache  and MySql server .  
o Create a database named stdBook in MySQL. 
o Add  ‘Spring Data Jpa”  (To work with JPA repositories and database) and “MySql 
Driver” dependencies while creating a maven project using spring initializr . 
o Run the App class as a Java Application (right-click > Run As > Java Application). 